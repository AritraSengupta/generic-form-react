(this["webpackJsonpreact-generic-form-example"]=this["webpackJsonpreact-generic-form-example"]||[]).push([[0],{144:function(e,t,a){},166:function(e,t,a){e.exports=a(195)},193:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(54),i=a.n(o),l=a(130),d=a(85),u=a(25),s=a(2),c=a.n(s),p=a(212),f=a(58),m=a(209),h=a(211),v=a(210),y=a(215),b=a(213);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function k(e,t){try{var a=e()}catch(n){return t(n)}return a&&a.then?a.then(void 0,t):a}var I={required:function(e){return"number"===typeof e?{state:!1}:{state:!(e&&e.length),message:"is required"}},maxLength:function(e,t){var a=t.maxLength;return"string"!==typeof e?{state:!0,message:"should be a string"}:{state:e.length>a,message:"can be a maximum length of "+a}},minLength:function(e,t){var a=t.minLength;return"string"!==typeof e?{state:!0,message:"should be a string"}:{state:e.length<a,message:"should be a minimum length of "+a}},number:function(e){return{state:!("number"===typeof e&&!Number.isNaN(Number(e))),message:"should be a number"}},max:function(e,t){var a=t.max;return{state:Number(e)>a,message:"cannot be more than "+a}},min:function(e,t){var a=t.min;return{state:Number(e)<a,message:"cannot be less than "+a}},pattern:function(e,t){var a=t.pattern,n=t.message;return{state:!new RegExp(a).test(e),message:n||"does not match pattern "+a}}},C=function(e,t){if("function"===typeof t)return t(e);if(t.type&&I[t.type])return I[t.type](e,t.params);throw new Error("Not a valid Validator")},D=function(e,t){if(Array.isArray(e)&&e.length){for(var a=null,n=0;n<e.length&&(!a||!a.state);n+=1)a=C(e[n],t);return a}return C(e,t)},V=function(e,t,a){if(Array.isArray(t)){var n=[];return t.forEach((function(t){var r=D(e,t);r.state&&n.push(g({name:a},r))})),n}var r=D(e,t);return r.state?[g({name:a},r)]:[]},E=function(e){return Array.isArray(e)?e.some((function(e){return!(!e||"required"!==e.type)})):!(!e||"required"!==e.type)};function O(e){return e instanceof Date&&!isNaN(e)}function S(e,t,a){return e+"-"+(t+1)+"-"+a}var _=function(e){var t=[];return Object.keys(e).forEach((function(a){var n=[];(e[a]||[]).forEach((function(e){e.state&&n.push(e.name+": "+e.message)})),t.push.apply(t,n)})),t};function N(e){return{formData:e.data.reduce((function(e,t){return e[t.dataId]=t.defaultValue,e}),{}),errors:e.errors||{},dynamicOptions:e.data.reduce((function(e,t){return"dropdown"===t.type&&t.config&&t.config.search&&(e[t.dataId]={options:t.options,callback:t.config.callback,loading:!1}),e}),{})}}var q=function(e){this.title="Generic Conditional Input Form",this.data=function(){return[]},this.reSyncValues=function(e,t,a){return Promise.resolve({values:e,errors:a})},this.props=e},R=function(e,t,a,n,r){if(!e)return!0;if(!O(n)&&!O(r))return!1;var o=O(n)?n:-1/0,i=O(r)?r:1/0,l=new Date(a,t,e);return l>=o&&l<=i},j=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._dayArray=["Su","Mo","Tu","We","Th","Fr","Sa"],t._monthArray=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t._getClassName=function(e,a,n){var r=a[e]||"";if(!r)return"compact";if(n)return"compact disabled";var o=t.props,i=o.month,l=o.year,d=o.selectedOrCurrent;return S(r,i,l)===d?"compact highlight selected":"compact highlight"},t._clickDay=function(e){(0,t.props.onChange)(e,e.target.dataset.name)},t.processCells=function(e){var a=t.props,n=a.highlightedDates,r=a.month,o=a.year,i=a.disableStart,l=a.disableEnd,d=[];return t._dayArray.forEach((function(a){var u=R(e[a],r,o,i,l),s={key:a,content:e[a]||"",className:t._getClassName(a,e,u),onClick:u?null:t._clickDay,"data-name":e[a]},c=n&&n[e[a]];c&&(s[c]=!0),d.push(s)})),d},t.renderBodyRowNew=function(e,a){return{key:"row-"+a,cells:t.processCells(e)}},t}w(t,e);var a=t.prototype;return a.getMonthData=function(e,t){var a=new Date(t,e+1,0);if(O(a)){var n=a.getDate(),r=a.getDay();return this.createMonthObject([{}],r,n)}return null},a.getHeaderRow=function(){return{cells:this._dayArray.map((function(e){return{key:e,style:{padding:0},content:e}}))}},a.createMonthObject=function(e,t,a){if(0===a)return e;var n=this._dayArray[t];return e[0][n]=a,0===t&&a>1?(e.unshift({}),this.createMonthObject(e,6,a-1)):this.createMonthObject(e,t-1,a-1)},a.render=function(){var e=this.props,t=e.month,a=e.year,n=this.getMonthData(t,a),o=this.getHeaderRow();return n?r.a.createElement(p.a,{size:"small",textAlign:"center",collapsing:!0,headerRow:o,renderBodyRow:this.renderBodyRowNew,tableData:n,className:"table-month"}):r.a.createElement("span",null," Invalid Date ")},t}(r.a.Component);j.propTypes={month:c.a.number,year:c.a.number,selectedOrCurrent:c.a.string,onChange:c.a.func.isRequired,highlightedDates:c.a.arrayOf(c.a.number),disableStart:c.a.string,disableEnd:c.a.string};var A=[["Jan","Feb","Mar"],["Apr","May","Jun"],["Jul","Aug","Sep"],["Oct","Nov","Dec"]],M=function(e){return[[e-7,e-6,e-5],[e-4,e-3,e-2],[e-1,e,e+1],[e+2,e+3,e+4]]},P=function(e){function t(t){var a;return(a=e.call(this,t)||this).processCells=function(e){var t=a.props.selectedMonth,n=[];return e.forEach((function(e){var r={key:e,content:e||"",className:"compact highlight "+(t===e?"selected":""),onClick:a._clickMonth,"data-name":e};n.push(r)})),n},a.renderBodyRowNew=function(e,t){return{key:"row-"+t,cells:a.processCells(e)}},a._clickMonth=a._clickMonth.bind(x(a)),a}w(t,e);var a=t.prototype;return a._clickMonth=function(e){(0,this.props.onSelectMonth)(e.target.dataset.name)},a.render=function(){return r.a.createElement(p.a,{size:"small",textAlign:"center",renderBodyRow:this.renderBodyRowNew,tableData:A,className:"table-month"})},t}(r.a.Component);P.propTypes={selectedMonth:c.a.string,onSelectMonth:c.a.func.isRequired};var F=function(e){function t(t){var a;return(a=e.call(this,t)||this).processCells=function(e){var t=a.props.selectedYear,n=[];return e.forEach((function(e){var r={key:e,content:e||"",className:"compact highlight "+(t===e?"selected":""),onClick:a._clickYear,"data-name":e};n.push(r)})),n},a.renderBodyRowNew=function(e,t){return{key:"row-"+t,cells:a.processCells(e)}},a._clickYear=a._clickYear.bind(x(a)),a}w(t,e);var a=t.prototype;return a._clickYear=function(e){(0,this.props.onSelectYear)(parseInt(e.target.dataset.name))},a.render=function(){var e=this.props.year;return r.a.createElement(p.a,{size:"small",textAlign:"center",renderBodyRow:this.renderBodyRowNew,tableData:M(e),className:"table-month"})},t}(r.a.Component);F.propTypes={year:c.a.number.isRequired,selectedYear:c.a.number,onSelectYear:c.a.func.isRequired};var T=function(e){var t=new Date(function(e){var t=e.split("-");return[t[1],t[0],t[2]].join("-")}(e||"")),a=O(t);a||(a=O(t=new Date(e||"")));var n=a?t:new Date(Date.now()),r=n.getMonth(),o=n.getFullYear(),i=n.getDate();return{isValidProvidedDate:a,date:i,month:r,year:o,value:i+"-"+(r+1)+"-"+o}},Y=function(e){var t=e.label,a=e.onPrev,n=e.onNext,o=e.onClick;return r.a.createElement("div",{style:{height:20,backgroundColor:"white"}},r.a.createElement(f.a,{name:"arrow left",onClick:a,className:"arrow_icon"}),r.a.createElement("div",{style:{display:"inline-block",margin:"0 40px",cursor:"pointer"},onClick:o},t),r.a.createElement(f.a,{name:"arrow right",onClick:n,className:"arrow_icon"}))},B=function(e){function t(t){var a;(a=e.call(this,t)||this)._monthArray=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a._yearPrev=function(){var e=a.state.year;e-=1,a.setState({year:e})},a._yearNext=function(){var e=a.state.year;e+=1,a.setState({year:e})},a._monthNext=function(){var e=a.state,t=e.month,n=e.year;(t+=1)>11&&(t=0,n+=1),a.setState({month:t,year:n})},a._monthPrev=function(){var e=a.state,t=e.month,n=e.year;(t-=1)<0&&(t=11,n-=1),a.setState({month:t,year:n})},a._onDateChange=function(e,t){var n=a.state,r=n.month,o=n.year,i=a.props.onDateChange,l=S(t,r,o);i?(i(e,g({},a.props,{value:l})),a.setState({popupOpen:!1})):a.setState({value:l,date:t,popupOpen:!1})},a._onClick=function(){a.setState({popupOpen:!0})},a._handleClose=function(){a.setState({popupOpen:!1})},a._showMonthTable=function(){a.setState({showMonth:!0})},a._hideMonthTable=function(){a.setState({showMonth:!1})},a._showYearTable=function(){a.setState({showYear:!0})},a._onSelectMonth=function(e){a.setState({month:a._monthArray.indexOf(e),showMonth:!1})},a._onSelectYear=function(e){a.setState({year:e,pickerYear:e,showYear:!1})},a._pickerYearPrev=function(){var e=a.state.pickerYear;a.setState({pickerYear:e-12})},a._pickerYearNext=function(){var e=a.state.pickerYear;a.setState({pickerYear:e+12})};var n=T(t.value),r=n.date,o=n.month,i=n.year,l=n.isValidProvidedDate,d=n.value,u=T(t.startDisabled||""),s=T(t.endDisabled||"");return a.state={month:o,year:i,date:r,value:l?d:"",popupOpen:!1,showMonth:!1,showYear:!1,pickerYear:i,startDisabled:u.isValidProvidedDate?u:null,endDisabled:s.isValidProvidedDate?s:null},a._today=S(r,o,i),a}w(t,e),t.getDerivedStateFromProps=function(e,t){var a=e.value,n=e.startDisabled,r=e.endDisabled,o=T(n||null),i=T(r||null),l=t.value,d=t.startDisabled,u=t.endDisabled,s=T(a),c=s.isValidProvidedDate,p=s.value,f={};return a&&a!==l&&(f.value=c?p:a),o.value!==d&&(f.startDisabled=o.isValidProvidedDate?o:null),i.value!==u&&(f.endDisabled=i.isValidProvidedDate?i:null),f};var a=t.prototype;return a.shouldComponentUpdate=function(e,t){var a=this.state,n=a.value,r=a.popupOpen,o=t.popupOpenNew;return n!==e.value||r!==o||!Object(u.isEqual)(this.props,e)},a.render=function(){var e,t=this.state,a=t.month,n=t.year,o=t.date,i=t.value,l=t.popupOpen,d=t.showMonth,u=t.showYear,s=t.pickerYear,c=t.startDisabled,p=t.endDisabled,f=c?new Date(c.year,c.month,c.date):null,v=p?new Date(p.year,p.month,p.date):null,y=r.a.createElement("div",{className:"date_picker_container results transition visible"},r.a.createElement(Y,{label:n,onPrev:this._yearPrev,onNext:this._yearNext,onClick:this._showYearTable}),r.a.createElement(Y,{label:this._monthArray[a],onPrev:this._monthPrev,onNext:this._monthNext,onClick:this._showMonthTable}),r.a.createElement(j,{disableStart:f,disableEnd:v,month:a,year:n,date:o,onChange:this._onDateChange,selectedOrCurrent:i||this._today})),b=r.a.createElement("div",{className:"date_picker_container results transition visible"},r.a.createElement(Y,{label:null,onPrev:this._pickerYearPrev,onNext:this._pickerYearNext,onClick:function(){return null}}),r.a.createElement(F,{onSelectYear:this._onSelectYear,year:s,selectedYear:n})),g=r.a.createElement("div",{className:"date_picker_container results transition visible"},r.a.createElement(P,{onSelectMonth:this._onSelectMonth,selectedMonth:this._monthArray[a]}));e=d?g:u?b:y;var w=r.a.createElement(m.a,{fluid:!0,icon:"calendar",iconPosition:"left",value:i,onClick:this._onClick});return r.a.createElement(h.a,{trigger:w,content:e,on:"click",open:l,onClose:this._handleClose,basic:!0,style:{padding:0},verticalOffset:-10})},t}(r.a.Component);B.propTypes={value:c.a.string,startDisabled:c.a.string,endDisabled:c.a.string,onDateChange:c.a.func.isRequired};var J=function(e){function t(t){var a;return(a=e.call(this,t)||this).validateInput=function(e,t,a,n,r){var o;return!t||Array.isArray(t)&&!t.length?a.errors:g({},a.errors,((o={})[n]=V(e,t,r),o))},a.handleInputChange=function(e,t){var n=t.name,r=t.value,o=t.validators,i=t.fieldname;return a.setState((function(e){var t;return{formData:g({},e.formData,(t={},t[n]=r,t)),errors:a.validateInput(r,o,e,n,i)}}))},a.handleCheckChange=function(e,t){var n=t.name,r=t.value,o=t.checked,i=t.validators,l=t.fieldname;return a.setState((function(e){var t,d,u,s=g({},e.formData[n].value,((t={})[r]=o,t)),c=(u=s,Object.keys(u).filter((function(e){return u[e]})));return{formData:g({},e.formData,(d={},d[n]={value:s,selected:c},d)),errors:a.validateInput((c||[]).filter((function(e){return!!e})),i,e,n,l)}}))},a.handleDropdownChange=function(e,t){var n,r,o=t.name,i=t.value,l=t.validators,d=t.multiple,u=t.options,s=t.fieldname;d?(n=u.filter((function(e){return i.includes(e.value)})),r=n.map((function(e){return e&&e.text}))):(n=u.filter((function(e){return e.value===i}))[0],r=n&&n.text),a.setState((function(e){var t;return{formData:g({},e.formData,(t={},t[o]={value:i,selected:n},t)),errors:a.validateInput(r,l,e,o,s)}}))},a.addNewDropdownItem=function(e,t){var n=t.name,r=t.value,o=t.multiple,i=t.validators,l=t.fieldname;if(o)throw new Error("Adding new elements with multiple dropdown not supported yet");var d=a.state.dynamicOptions,u={text:r,value:-1};d[n].options=[].concat(d[n].options,[u]),a.setState((function(e){var t;return{formData:g({},e.formData,(t={},t[n]={value:u.value,selected:u},t)),errors:a.validateInput(r,i,e,n,l),dynamicOptions:d}}))},a.validateForm=function(){try{var e=a.state,t=e.errors,n=e.formData,r=a.props.data;if(Object.values(t).some((function(e){return e.length})))return Promise.resolve(!0);var o=function(e,t){return e.map((function(e){var a=t[e.dataId];if(a&&"dropdown"===e.type){var n=a.selected;a=Array.isArray(n)?n.map((function(e){return e.text})):n&&n.text}else a&&"checkbox"===e.type&&(a=a.selected);return{id:e.dataId,validators:e.validators,value:a,name:e.fieldname}}))}(r,n),i={};return o.forEach((function(e){e.validators&&(i[e.id]=V(e.value,e.validators,e.name))})),Promise.resolve(new Promise((function(e){a.setState({errors:i},(function(){var t=!!Object.values(i).some((function(e){return e.length}));e(t)}))})))}catch(l){return Promise.reject(l)}},a.state=N(t),a.handleDynamicSearchChange=Object(u.debounce)(a.handleDynamicSearchChange.bind(x(a)),500),a.getFormUnit=a.getFormUnit.bind(x(a)),a.updateStateIfPropsChange=a.updateStateIfPropsChange.bind(x(a)),t.onChange(a.state),a}w(t,e);var a=t.prototype;return a.componentDidUpdate=function(e,t){(this.updateStateIfPropsChange(e),Object(u.isEqual)(t,this.state))||(0,this.props.onChange)(this.state)},a.updateStateIfPropsChange=function(e){if(!Object(u.isEqual)(e,this.props)){var t=N(this.props);this.setState(t)}},a.handleDynamicSearchChange=function(e,t){var a=t.name,n=t.multiple,r=t.searchQuery;try{var o=this,i=function(){var e=c[a].selected||[];s[a].options=n?Object(u.uniqBy)([].concat(l,e),"value"):l,s[a].loading=!1,o.setState({dynamicOptions:s})};if(!r.length)return Promise.resolve();var l,d=o.state,s=d.dynamicOptions,c=d.formData;s[a].loading=!0,o.setState({dynamicOptions:s});var p=k((function(){return Promise.resolve(s[a].callback(r)).then((function(e){l=e}))}),(function(){l=[]}));return Promise.resolve(p&&p.then?p.then(i):i())}catch(e){return Promise.reject(e)}},a.getFormUnit=function(e){var t=this,a=this.state,n=a.formData,o=a.errors,i=a.dynamicOptions;if("hidden"===e.type||e.config&&!1===e.config.visible)return null;if("input"===e.type)return r.a.createElement(v.a.Input,g({key:e.dataId,required:E(e.validators),validators:e.validators,name:e.dataId,field_name:e.fieldname,label:e.fieldname,value:n[e.dataId]||"",error:!(!o[e.dataId]||!o[e.dataId].length),onChange:this.handleInputChange,disabled:e.config&&e.config.disabled},e.config&&e.config.props||{},{"data-testid":"input"}));if("dropdown"===e.type){if(e.config&&e.config.search){var l=e.config&&e.config.multiple,d=(n[e.dataId]||{}).value;return!d&&l&&(d=[]),r.a.createElement(v.a.Dropdown,{key:e.dataId,label:e.fieldname,name:e.dataId,fieldname:e.fieldname,options:i[e.dataId].options,multiple:l,clearable:e.config&&e.config.clearable,selection:!0,search:!0,placeholder:e.placeholder,value:d,onChange:this.handleDropdownChange,onSearchChange:this.handleDynamicSearchChange,disabled:e.config&&e.config.disabled||i[e.dataId].loading,loading:i[e.dataId].loading,onAddItem:this.addNewDropdownItem,allowAdditions:e.config&&e.config.allowAdditions,validators:e.validators,error:!(!o[e.dataId]||!o[e.dataId].length),required:E(e.validators),"data-testid":"dropdown-search"})}return r.a.createElement(v.a.Dropdown,{key:e.dataId,label:e.fieldname,name:e.dataId,fieldname:e.fieldname,options:e.options,multiple:e.config&&e.config.multiple,clearable:e.config&&e.config.clearable,selection:!0,placeholder:e.placeholder,value:(n[e.dataId]||{}).value,onChange:this.handleDropdownChange,disabled:e.config&&e.config.disabled,onAddItem:this.addNewDropdownItem,allowAdditions:e.config&&e.config.allowAdditions,loading:e.config&&e.config.loading,validators:e.validators,error:!(!o[e.dataId]||!o[e.dataId].length),required:E(e.validators),"data-testid":"dropdown"})}return"radio"===e.type?r.a.createElement(r.a.Fragment,{key:e.dataId},r.a.createElement(v.a.Field,{required:E(e.validators),error:!(!o[e.dataId]||!o[e.dataId].length)},r.a.createElement("label",null,e.fieldname)),e.options.map((function(a){return r.a.createElement(v.a.Radio,{key:a.value,label:a.text,name:e.dataId,fieldname:e.fieldname,value:a.value,checked:n[e.dataId]===a.value,onChange:t.handleInputChange,validators:e.validators,error:!(!o[e.dataId]||!o[e.dataId].length)})}))):"checkbox"===e.type?r.a.createElement(r.a.Fragment,{key:e.dataId},r.a.createElement(v.a.Field,{required:E(e.validators),error:!(!o[e.dataId]||!o[e.dataId].length)},r.a.createElement("label",null,e.fieldname)),e.options.map((function(a){return r.a.createElement(v.a.Checkbox,{key:a.value,label:a.text,name:e.dataId,fieldname:e.fieldname,value:a.value,checked:!!((n[e.dataId]||{}).value||{})[a.value],onChange:t.handleCheckChange,validators:e.validators,error:!(!o[e.dataId]||!o[e.dataId].length)})}))):"textarea"===e.type?r.a.createElement(v.a.TextArea,{key:e.dataId,required:E(e.validators),name:e.dataId,fieldname:e.fieldname,label:e.fieldname,value:n[e.dataId]||"",error:!(!o[e.dataId]||!o[e.dataId].length),onChange:this.handleInputChange,validators:e.validators}):"date"===e.type?r.a.createElement(r.a.Fragment,{key:e.dataId},r.a.createElement(v.a.Field,{required:E(e.validators),error:!(!o[e.dataId]||!o[e.dataId].length)},r.a.createElement("label",null,e.fieldname),r.a.createElement(B,g({"data-testid":"date",key:e.dataId,name:e.dataId,fieldname:e.fieldname,value:n[e.dataId],onDateChange:this.handleInputChange,validators:e.validators},e.config&&e.config.props||{})))):r.a.createElement("div",null,"Improper Config")},a.renderGrid=function(e,t){var a=this,n=function(e,t){for(var a=[],n=0;n<e.length;){for(var r=[],o=0;o<t&&n<e.length;)e[n]&&"hidden"!==e[n].type&&(r.push(e[n]),o+=1),n+=1;r.length&&a.push(r)}return a}(e,t),o=(n[0]||[]).length,i=t<o?t:o;return r.a.createElement(y.a,{columns:i,divided:!0,padded:!0},n.map((function(e,t){return r.a.createElement(y.a.Row,{key:""+e.dataId+t},e.map((function(e,t){return r.a.createElement(y.a.Column,{key:""+e.dataId+t},a.getFormUnit(e))})))})))},a.render=function(){var e=this,t=this.state.errors,a=this.props,n=a.data,o=a.loading,i=a.columns,l=i>1;return r.a.createElement(v.a,{loading:!!o,error:t&&Object.values(t).some((function(e){return e.length}))},r.a.createElement(b.a,{error:!0,header:"Please check the form for the following",list:_(t)}),l?this.renderGrid(n,i):n.map((function(t){return e.getFormUnit(t)})))},t}(r.a.Component);J.propTypes={data:c.a.arrayOf(c.a.exact({dataId:c.a.string.isRequired,type:c.a.oneOf(["hidden","date","input","textarea","dropdown","checkbox","radio"]).isRequired,fieldname:c.a.string,defaultValue:c.a.oneOfType([c.a.string,c.a.number,c.a.object]),config:c.a.object,options:c.a.arrayOf(c.a.shape({text:c.a.string,value:c.a.oneOfType([c.a.number,c.a.string])})),validators:c.a.arrayOf(c.a.oneOfType([c.a.object,c.a.func]))})).isRequired,onChange:c.a.func.isRequired,loading:c.a.bool,columns:c.a.number,errors:c.a.object};var U=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={defaultValues:t.defaultValues||{},prevValues:{},errors:t.errors||{},loading:!1},a.formRef=r.a.createRef(),a.onChange=a.onChange.bind(x(a)),a.updateForm=a.updateForm.bind(x(a)),a.validateForm=a.validateForm.bind(x(a)),a}w(t,e);var a=t.prototype;return a.onChange=function(e){var t=e.formData,a=e.errors;try{var n=this,r=function(){n.updateForm(f,i,m,t,h)},o=n.state,i=o.defaultValues,l=o.formData,d=o.errors;if(Object(u.isEqual)(l,t)&&Object(u.isEqual)(a,d))return Promise.resolve();var s=n.props,c=s.data,p=s.reSyncValues,f=function(e,t){var a={};return e.forEach((function(e){if("checkbox"!==e.type)if("files"!==e.type)if("dropdown"!==e.type){var n=Object(u.get)(t,e.dataId,null);a[e.dataId]={defaultValue:n}}else{var r,o,i=Object(u.get)(t,e.dataId,{});if(e.config&&e.config.multiple)0===(r=i&&i.selected||[]).length&&(i.value=[],i.selected=[]),o=Object(u.uniqBy)([].concat(e.options||[],r),"value");else{var l=(i||{}).selected;r=l?[l]:[],o=Object(u.uniqBy)([].concat(e.options||[],r),"value")}a[e.dataId]={defaultValue:i,options:o}}else{var d=Object(u.get)(t,e.dataId,[]);a[e.dataId]={defaultValue:d}}else{var s=Object(u.get)(t,e.dataId,{value:{},selected:[]});a[e.dataId]={defaultValue:s}}})),a}(c(i),t),m=a,h=!1,v=function(){if(p){var e=k((function(){return h=!0,n.updateForm(f,i,m,t,h),Promise.resolve(p(f,i,a,t,n.updateForm)).then((function(e){var t=e.values,a=e.errors;h=!1,f=t,m=a}))}),(function(){h=!1,m.generic=!0}));if(e&&e.then)return e.then((function(){}))}}();return Promise.resolve(v&&v.then?v.then(r):r())}catch(y){return Promise.reject(y)}},a.validateForm=function(){return this.formRef.current.validateForm()},a.updateForm=function(e,t,a,n,r){var o=this.props.onChange;this.setState({defaultValues:e,prevValues:t,errors:a,formData:n,loading:r}),o&&o({formData:n,errors:a})},a.render=function(){var e=this.state,t=e.errors,a=e.defaultValues,n=e.prevValues,o=e.loading,i=this.props,l=i.data,d=i.columns,u=l(a,n);return r.a.createElement(J,{columns:d,data:u,onChange:this.onChange,errors:t,loading:o,ref:this.formRef})},t}(r.a.Component);U.propTypes={data:c.a.func,errors:c.a.object,defaultValues:c.a.object,onChange:c.a.func};class L extends q{constructor(...e){super(...e),this.title="Basic Example",this.data=(e,t)=>{const a=this.props,n=a.checkboxOptions,r=a.radioOptions;return[{dataId:"id",type:"hidden",defaultValue:null},{fieldname:"Date",dataId:"date",type:"date",defaultValue:e.date&&e.date.defaultValue,validators:[{type:"required"}]},{fieldname:"Name",dataId:"name",type:"input",defaultValue:e.name&&e.name.defaultValue,validators:[{type:"required"}]},{fieldname:"TextArea",dataId:"textarea",type:"textarea",defaultValue:e.textarea&&e.textarea.defaultValue,validators:[{type:"required"}]},{fieldname:"Dropdown",dataId:"dropdown",type:"dropdown",defaultValue:e.dropdown&&e.dropdown.defaultValue,config:{clearable:!0},options:[{text:"Option1",value:1},{text:"Option2",value:2}],validators:[{type:"required"}]},{fieldname:"Checkbox",dataId:"checkbox",type:"checkbox",defaultValue:e.checkbox&&e.checkbox.defaultValue,options:n,validators:[{type:"required"}]},{fieldname:"Radio",dataId:"radio",type:"radio",defaultValue:e.radio&&e.radio.defaultValue,options:r,validators:[{type:"required"}]}]}}}var z=a(31),G=a.n(z),H=a(55);const W=function(){var e=Object(H.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>setTimeout(()=>e([{text:"Option1",value:1},{text:"Option2",value:2},{text:"Option3",value:3},{text:"Option4",value:4}]),1e3)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();class Q extends q{constructor(...e){super(...e),this.title="Basic Example",this.data=(e,t)=>[{dataId:"id",type:"hidden",defaultValue:null},{fieldname:"Date",dataId:"date",type:"date",defaultValue:e.date&&e.date.defaultValue,validators:[{type:"required"}]},{fieldname:"Name",dataId:"name",type:"input",defaultValue:e.name&&e.name.defaultValue,validators:[{type:"required"}]},{fieldname:"TextArea",dataId:"textarea",type:"textarea",defaultValue:e.textarea&&e.textarea.defaultValue,validators:[{type:"required"}]},{fieldname:"Dropdown",dataId:"dropdown",type:"dropdown",defaultValue:e.dropdown&&e.dropdown.defaultValue,config:{search:!0,callback:W,clearable:!0},options:e.dropdown&&e.dropdown.options||[],validators:[{type:"required"}]},{fieldname:"Dropdown Multiple",dataId:"dropdownMul",type:"dropdown",defaultValue:e.dropdown&&e.dropdownMul.defaultValue,config:{multiple:!0,search:!0,callback:W,clearable:!0},options:e.dropdown&&e.dropdownMul.options||[],validators:[{type:"required"}]},{fieldname:"Checkbox",dataId:"checkbox",type:"checkbox",defaultValue:e.checkbox&&e.checkbox.defaultValue,options:[{text:"Checkbox1",value:1},{text:"Checkbox2",value:2}],validators:[{type:"required"}]},{fieldname:"Radio",dataId:"radio",type:"radio",defaultValue:e.radio&&e.radio.defaultValue,options:[{text:"Radio1",value:1},{text:"Radio2",value:2},{text:"Radio3",value:3}]}]}}const K=function(){var e=Object(H.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>setTimeout(()=>e([{text:"Option1",value:1},{text:"Option2",value:2},{text:"Option3",value:3},{text:"Option4",value:4}]),1e3)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();class X extends q{constructor(...e){super(...e),this.title="Basic Example",this.data=(e,t)=>{const a=e.date&&e.date.defaultValue,n=a?e.name&&e.name.defaultValue:null,r=n?e.textarea&&e.textarea.defaultValue:null,o=r?e.dropdown&&e.dropdown.defaultValue:{},i=(t&&t.dropdown&&t.dropdown.defaultValue||{}).value!==(o||{}).value?{}:e.checkbox&&e.checkbox.defaultValue||{},l=i.value?e.radio&&e.radio.defaultValue:{};return[{dataId:"id",type:"hidden",defaultValue:null},{fieldname:"Date",dataId:"date",type:"date",defaultValue:a,validators:[{type:"required"}]},{fieldname:"Name",dataId:"name",type:"input",defaultValue:n,config:{visible:!!a},validators:[{type:"required"}]},{fieldname:"TextArea",dataId:"textarea",type:"textarea",config:{visible:!!n},defaultValue:r,validators:[{type:"required"}]},{fieldname:"Dropdown",dataId:"dropdown",type:"dropdown",defaultValue:o,config:{search:!0,callback:K,clearable:!0,visible:!!r},options:e.dropdown&&e.dropdown.options||[],validators:[{type:"required"}]},{fieldname:"Checkbox",dataId:"checkbox",type:"checkbox",defaultValue:i,config:{visible:!!o.value},options:[{text:"Checkbox1",value:1},{text:"Checkbox2",value:2}],validators:[{type:"required"}]},{fieldname:"Radio",dataId:"radio",type:"radio",config:{visible:void 0!==i.selected&&null!==i.selected&&!!i.selected.length},defaultValue:l,options:[{text:"Radio1",value:1},{text:"Radio2",value:2},{text:"Radio3",value:3}]}]}}}const Z=function(){var e=Object(H.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>setTimeout(()=>e([{text:"Option1",value:1},{text:"Option2",value:2},{text:"Option3",value:3},{text:"Option4",value:4}]),1e3)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();class $ extends q{constructor(...e){super(...e),this.title="Basic Example",this.data=(e,t)=>[{dataId:"id",type:"hidden",defaultValue:null},{fieldname:"Date",dataId:"date",type:"date",defaultValue:e.date&&e.date.defaultValue,validators:[{type:"required"}]},{fieldname:"Name",dataId:"name",type:"input",defaultValue:e.name&&e.name.defaultValue,validators:[{type:"required"}]},{fieldname:"TextArea",dataId:"textarea",type:"textarea",defaultValue:e.textarea&&e.textarea.defaultValue,validators:[{type:"required"}]},{fieldname:"Dropdown",dataId:"dropdown",type:"dropdown",defaultValue:e.dropdown&&e.dropdown.defaultValue,config:{search:!0,callback:Z,clearable:!0},options:e.dropdown&&e.dropdown.options||[],validators:[{type:"required"}]},{fieldname:"Dropdown Multiple",dataId:"dropdownMul",type:"dropdown",defaultValue:e.dropdown&&e.dropdownMul.defaultValue,config:{multiple:!0,clearable:!0},options:e.dropdown&&e.dropdownMul.options||[],validators:[{type:"required"}]},{fieldname:"Checkbox",dataId:"checkbox",type:"checkbox",defaultValue:e.checkbox&&e.checkbox.defaultValue,options:[{text:"Checkbox1",value:1},{text:"Checkbox2",value:2}],validators:[{type:"required"}]},{fieldname:"Radio",dataId:"radio",type:"radio",defaultValue:e.radio&&e.radio.defaultValue,options:[{text:"Radio1",value:1},{text:"Radio2",value:2},{text:"Radio3",value:3}]}],this.reSyncValues=function(){var e=Object(H.a)(G.a.mark((function e(t,a,n){var r,o,i,l,u;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(d.a)({},t),o=t.dropdown&&t.dropdown.defaultValue&&t.dropdown.defaultValue.value,i=a.dropdown&&a.dropdown.defaultValue&&a.dropdown.defaultValue.value,o===i){e.next=9;break}return e.next=6,Z();case 6:l=e.sent,u=l[0],r.dropdownMul={defaultValue:{value:u.value,selected:u},options:l};case 9:return e.abrupt("return",{values:r,errors:n});case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}}a(144),a(193),a(194);const ee={container:{display:"flex",justifyContent:"center",marginTop:"16px"},formContainer:{width:"400px"},link:{marginRight:"8px",cursor:"pointer"},get linkSelected(){return Object(d.a)(Object(d.a)({},this.link),{},{color:"black",fontWeight:600})},buttonReset:{marginLeft:"260px",marginTop:"20px"},buttonSubmit:{marginLeft:"10px",marginTop:"20px"},separator:{marginRight:"8px"}},te={basic:{header:"Basic Form Example",description:"This is a basic form example with validation."},async:{header:"Dropdown with Asynchronous Values",description:"The dropdown options are loaded dynamically from backend"},conditional1:{header:"Conditional Form Basic",description:"The form is loaded conditionally based on the current state of the form"},conditional2:{header:"Conditional Form Advanced",description:"The form options to the second dropdown is based on an api call from the first dropdown"}},ae=[{text:"Radio1",value:1},{text:"Radio2",value:2},{text:"Radio3",value:3}],ne=[{text:"Checkbox1",value:1},{text:"Checkbox2",value:2}];var re=()=>{const e=Object(n.useRef)(null),t=Object(n.useState)("basic"),a=Object(l.a)(t,2),o=a[0],i=a[1],d=Object(n.useState)({}),u=Object(l.a)(d,2),s=u[0],c=u[1],p=new L({radioOptions:ae,checkboxOptions:ne}),f=new Q,m=new X,h=new $,v=e=>e===o?ee.linkSelected:ee.link;return r.a.createElement("div",{style:ee.container},r.a.createElement("div",{style:ee.formContainer},r.a.createElement("div",null,r.a.createElement("button",{onClick:()=>i("basic"),style:v("basic"),className:"link"},"Basic"),r.a.createElement("span",{style:ee.separator},"|"),r.a.createElement("button",{onClick:()=>i("async"),style:v("async"),className:"link"},"Async"),r.a.createElement("span",{style:ee.separator},"|"),r.a.createElement("button",{onClick:()=>i("conditional1"),style:v("conditional1"),className:"link"},"Conditional"),r.a.createElement("span",{style:ee.separator},"|"),r.a.createElement("button",{onClick:()=>i("conditional2"),style:v("conditional2"),className:"link"},"Conditional (Adv)"),r.a.createElement("span",{style:ee.separator},"|"),r.a.createElement("hr",null)),r.a.createElement("div",null,r.a.createElement("h3",null,te[o].header),r.a.createElement("span",null,te[o].description)),"basic"===o&&r.a.createElement(U,{data:p.data,ref:e,defaultValues:s}),"async"===o&&r.a.createElement(U,{data:f.data,ref:e}),"conditional1"===o&&r.a.createElement(U,{data:m.data,ref:e}),"conditional2"===o&&r.a.createElement(U,{data:h.data,reSyncValues:h.reSyncValues,ref:e}),r.a.createElement("div",null,r.a.createElement("button",{onClick:()=>c({}),className:"btn btn_secondary",style:ee.buttonReset},"Reset"),r.a.createElement("button",{onClick:()=>{e.current.validateForm&&e.current.validateForm()},className:"btn btn_primary",style:ee.buttonSubmit},"Submit"))))};i.a.render(r.a.createElement(re,null),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.2febc17f.chunk.js.map